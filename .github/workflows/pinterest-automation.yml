name: Pinterest Wealth Automation

on:
  schedule:
    # Haftada 5 kez (Pzt, Sal, Per, Cum, Cmt)
    - cron: '0 9 * * 1'    # Pazartesi 12:00 TR
    - cron: '0 9 * * 2'    # Salı 12:00 TR
    - cron: '0 9 * * 4'    # Perşembe 12:00 TR
    - cron: '0 9 * * 5'    # Cuma 12:00 TR
    - cron: '0 9 * * 6'    # Cumartesi 12:00 TR
  workflow_dispatch:
  push:
    branches: [ main, master ]

jobs:
  pinterest-wealth:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout
      uses: actions/checkout@v3
    
    - name: Setup Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.11'
    
    - name: Post Wealth Content
      env:
        IFTTT_KEY: cUu4H4H-go1BkVlG-_mnnq
        WEBSITE_URL: https://savetracker.site
      run: |
        python << 'EOF'
        import requests
        import random
        import os
        from datetime import datetime
        import urllib.parse
        import hashlib

        # ============================================
        # WEALTH & LUXURY CONTENT
        # ============================================
        
        content_types = [
            {
                "name": "luxury_cars",
                "scenes": [
                    "sleek black Lamborghini Aventador parked in front of modern mansion",
                    "stunning red Ferrari on mountain road at golden sunset",
                    "elegant white Rolls-Royce Phantom with luxury interior",
                    "powerful Porsche 911 Turbo in urban night setting",
                    "Mercedes-Benz S-Class in front of five star hotel",
                    "pristine Bentley Continental GT on coastal highway",
                    "matte black McLaren 720S in modern garage collection"
                ],
                "titles": [
                    "💎 Dream Car = Smart Savings Today",
                    "🏎️ Your Luxury Vehicle Awaits",
                    "🚗 From Savings to Supercar",
                    "⚡ Fast Track to Your Dream Ride"
                ]
            },
            {
                "name": "luxury_homes",
                "scenes": [
                    "stunning modern mansion with infinity pool overlooking ocean",
                    "luxurious penthouse with floor-to-ceiling windows and city view",
                    "elegant Mediterranean villa with marble columns at sunset",
                    "contemporary home with indoor garden and zen aesthetic",
                    "beachfront luxury villa with private dock and yacht",
                    "mountain chalet with panoramic glass walls and snow peaks"
                ],
                "titles": [
                    "🏰 Your Dream Home Starts With Savings",
                    "🏡 From Renting to Owning Paradise",
                    "🌅 Mansion Living Made Possible",
                    "✨ Home Sweet Luxury Home"
                ]
            },
            {
                "name": "wealth_lifestyle",
                "scenes": [
                    "private jet interior with champagne glasses, luxury travel",
                    "luxury yacht deck at sunset on Mediterranean sea",
                    "Rolex watch collection displayed elegantly on marble",
                    "five star hotel suite with panoramic city view",
                    "private island resort cabana with crystal water",
                    "exclusive golf club with networking professionals"
                ],
                "titles": [
                    "✈️ Live the Life You Deserve",
                    "🥂 Luxury Lifestyle Within Reach",
                    "💼 Success Starts With Savings",
                    "🌍 World Travel Fund Building"
                ]
            },
            {
                "name": "money_success",
                "scenes": [
                    "neat stacks of hundred dollar bills on marble desk",
                    "golden coins arranged in ascending growth towers",
                    "piggy bank surrounded by dollar bills, smart savings concept",
                    "safe deposit box filled with cash and gold bars",
                    "stock market graphs showing upward trend on screens",
                    "golden Bitcoin coin with rising chart background"
                ],
                "titles": [
                    "💵 Stack Your Wealth Daily",
                    "💰 Money Mindset = Money Reality",
                    "📈 Watch Your Savings Multiply",
                    "🔥 Financial Freedom Formula"
                ]
            },
            {
                "name": "vacation_dreams",
                "scenes": [
                    "overwater bungalow in Maldives with crystal clear water",
                    "Santorini Greece white buildings with blue domes at sunset",
                    "Bali infinity pool overlooking green rice terraces",
                    "Dubai luxury hotel suite with city skyline view",
                    "Swiss Alps ski resort chalet in winter wonderland",
                    "Caribbean beach with turquoise water and palm trees"
                ],
                "titles": [
                    "✈️ Your Next Vacation Funded by Savings",
                    "🌴 Paradise is Just Savings Away",
                    "🏖️ Beach Life = Smart Money Life",
                    "🗺️ World Explorer Savings Plan"
                ]
            }
        ]

        # Select random category
        category = random.choice(content_types)
        scene = random.choice(category["scenes"])
        title = random.choice(category["titles"])

        # Visual enhancement
        styles = [
            "professional photography, perfect lighting, 8k quality",
            "cinematic style, golden hour, film aesthetic",
            "luxury advertising, dramatic lighting, premium feel",
            "magazine quality, perfectly composed, editorial style"
        ]
        
        style = random.choice(styles)
        
        # Create prompt
        prompt = (
            f"{scene}, "
            f"{style}, "
            f"hyperrealistic, sharp focus, "
            f"no text, no watermarks, no logos, "
            f"vertical format, Pinterest optimized"
        )
        
        print(f"🎨 Category: {category['name']}")
        print(f"📸 Scene: {scene}")
        print(f"📌 Title: {title}")

        # Generate image
        encoded_prompt = urllib.parse.quote(prompt)
        
        timestamp = int(datetime.now().timestamp())
        random_num = random.randint(1, 999999)
        unique_seed = (timestamp + random_num) % 1000000
        
        sizes = [
            {"width": 1000, "height": 1500},
            {"width": 1080, "height": 1620}
        ]
        size = random.choice(sizes)
        
        image_url = (
            f"https://image.pollinations.ai/prompt/{encoded_prompt}"
            f"?width={size['width']}"
            f"&height={size['height']}"
            f"&seed={unique_seed}"
            f"&nologo=true"
            f"&enhance=true"
        )
        
        print(f"🖼️  Image: {image_url[:80]}...")

        # Create description
        descriptions = [
            "💰 Your dream life isn't fantasy - it's a savings plan away! Start building wealth with smart money moves. Every dollar saved is freedom earned.",
            
            "✨ Stop dreaming, start doing! Luxury lifestyle begins with disciplined saving. Track goals, celebrate wins, achieve greatness.",
            
            "🚀 Financial transformation starts NOW! Automate savings, track progress, watch wealth multiply. The life you want is waiting.",
            
            "💎 Luxury isn't luck, it's choice. Save smart, invest wise, build abundance. Your future self will thank you!",
            
            "🏆 Success is daily decisions. Save consistently, invest intelligently, let compound interest work magic. Your empire awaits!"
        ]
        
        # Hashtags
        hashtags = [
            "#WealthBuilding", "#FinancialFreedom", "#MoneyGoals", "#SavingsMoney",
            "#MillionaireMindset", "#LuxuryLifestyle", "#PassiveIncome", "#MoneyMotivation",
            "#SmartMoney", "#FinancialGoals", "#WealthMindset", "#SuccessMindset",
            "#LuxuryCars", "#DreamHome", "#FinancialIndependence", "#MoneyTips"
        ]
        
        random.shuffle(hashtags)
        selected_tags = " ".join(hashtags[:12])
        
        final_description = (
            f"{random.choice(descriptions)}\n\n"
            f"🎯 Start FREE → {os.environ['WEBSITE_URL']}\n\n"
            f"{selected_tags}"
        )

        # Send to IFTTT
        ifttt_url = f"https://maker.ifttt.com/trigger/pinterest_post_save/with/key/{os.environ['IFTTT_KEY']}"
        
        payload = {
            "value1": image_url,
            "value2": title,
            "value3": final_description
        }
        
        print(f"\n📌 Posting to Pinterest...")
        print(f"🔗 IFTTT: {ifttt_url}")
        
        response = requests.post(ifttt_url, json=payload, timeout=30)
        
        print(f"\n📡 Status: {response.status_code}")
        print(f"📄 Response: {response.text}")
        
        if response.status_code == 200:
            print(f"\n✅ SUCCESS!")
            print(f"Category: {category['name']}")
            print(f"Website: {os.environ['WEBSITE_URL']}")
        else:
            print(f"\n❌ ERROR: {response.status_code}")
        
        EOF
    
    - name: Done
      run: echo "✅ Wealth content posted to Pinterest"
